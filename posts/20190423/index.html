<!doctype html><html><head><title>MySQLのNOW()とSYSDATE()の違いについて // J'aime les ramens</title><meta charset=utf-8><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content="MySQLのNOW()とSYSDATE()の違いについて"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:locale" content="en"><meta property="og:url" content="https://yuizho.github.io/blog/posts/20190423/"><meta property="og:image" content="https://yuizho.github.io/blog/img/yuizho.webp"><link rel="shortcut icon" href=/favicon.ico><link href=https://yuizho.github.io/blog/webfonts/ptserif/main.css rel=stylesheet type=text/css><link href=https://yuizho.github.io/blog/webfonts/source-code-pro/main.css rel=stylesheet type=text/css><link rel=stylesheet href=https://yuizho.github.io/blog/css/style.css><script>if('serviceWorker'in navigator){window.addEventListener('load',()=>{navigator.serviceWorker.register('https:\/\/yuizho.github.io\/blog\/sw.js').then(reg=>console.log('Service Worker: Registered')).catch(err=>console.log(`Service Worker: Error: ${err}`));});}</script><meta name=generator content="Hugo 0.61.0"></head><body><div id=container><header id=header><div id=header-outer class=outer><div id=header-inner class=inner><a id=main-nav-toggle class=nav-icon href=javascript:;></a><a id=logo class=logo-text href=https://yuizho.github.io/blog/>J'aime les ramens</a><nav id=main-nav><a class=main-nav-link href=https://yuizho.github.io/blog/tags>Tags</a>
<a class=main-nav-link href=https://yuizho.github.io/blog/about>About</a></nav><nav id=sub-nav></nav></div></div></header><section id=main class=outer><article class="article article-type-post" itemscope itemprop=blogPost><div class=article-inner><header class=article-header><h1 class=article-title itemprop=name>MySQLのNOW()とSYSDATE()の違いについて</h1></header><div class=article-meta><a href=/blog/posts/20190423/ class=article-date><time datetime=2019-04-23T14:15:48.000+00:00 itemprop=datePublished>2019-04-23</time></a></div><div class=article-entry itemprop=articleBody><h1 id=nowsysdate>NOW()とSYSDATE()の違い</h1><p><a href=https://dev.mysql.com/doc/refman/5.6/ja/date-and-time-functions.html>公式ドキュメント(5.6)</a>によると、</p><p>NOW()は、</p><blockquote><p>現在の日付または時間をそれぞれ返す関数は、クエリー実行の開始時にクエリーごとに 1 回だけ評価されます。
つまり、NOW() などの関数が単一クエリー内で複数回参照されても、常に同じ結果が生成されます。</p></blockquote><p>なのに対し、SYSDATE()は、</p><blockquote><p>SYSDATE() は、実行された時間を返します。
これは、ステートメントが実行を開始する時間を示す定数時間を返す NOW() の動作とは異なります。</p></blockquote><p>とのこと。</p><p>なお、<a href=https://dev.mysql.com/doc/refman/8.0/en/date-and-time-functions.html>公式ドキュメント(8.0)</a>にも同様の記載があり、バージョンが上がってもこの性質は受け継がれている模様。</p><h1 id=heading>実際に動かしてみる</h1><h2 id=now>NOW()</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> NOW(<span style=color:#ae81ff>6</span>) <span style=color:#66d9ef>as</span> now1, NOW(<span style=color:#ae81ff>6</span>) <span style=color:#66d9ef>as</span> now2;
 <span style=color:#75715e>---------------------------- ---------------------------- 
</span><span style=color:#75715e></span><span style=color:#f92672>|</span> now1                       <span style=color:#f92672>|</span> now2                       <span style=color:#f92672>|</span>
 <span style=color:#75715e>---------------------------- ---------------------------- 
</span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>04</span><span style=color:#f92672>-</span><span style=color:#ae81ff>23</span> <span style=color:#ae81ff>22</span>:<span style=color:#ae81ff>49</span>:<span style=color:#ae81ff>39</span>.<span style=color:#ae81ff>443339</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>04</span><span style=color:#f92672>-</span><span style=color:#ae81ff>23</span> <span style=color:#ae81ff>22</span>:<span style=color:#ae81ff>49</span>:<span style=color:#ae81ff>39</span>.<span style=color:#ae81ff>443339</span> <span style=color:#f92672>|</span>
 <span style=color:#75715e>---------------------------- ---------------------------- 
</span></code></pre></div><h2 id=sysdate>SYSDATE()</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sql data-lang=sql>mysql<span style=color:#f92672>&gt;</span> <span style=color:#66d9ef>SELECT</span> SYSDATE(<span style=color:#ae81ff>6</span>) <span style=color:#66d9ef>as</span> sys1, SYSDATE(<span style=color:#ae81ff>6</span>) <span style=color:#66d9ef>as</span> sys2;
 <span style=color:#75715e>---------------------------- ---------------------------- 
</span><span style=color:#75715e></span><span style=color:#f92672>|</span> sys1                       <span style=color:#f92672>|</span> sys2                       <span style=color:#f92672>|</span>
 <span style=color:#75715e>---------------------------- ---------------------------- 
</span><span style=color:#75715e></span><span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>04</span><span style=color:#f92672>-</span><span style=color:#ae81ff>23</span> <span style=color:#ae81ff>23</span>:<span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>29</span>.<span style=color:#ae81ff>857604</span> <span style=color:#f92672>|</span> <span style=color:#ae81ff>2019</span><span style=color:#f92672>-</span><span style=color:#ae81ff>04</span><span style=color:#f92672>-</span><span style=color:#ae81ff>23</span> <span style=color:#ae81ff>23</span>:<span style=color:#ae81ff>10</span>:<span style=color:#ae81ff>29</span>.<span style=color:#ae81ff>857622</span> <span style=color:#f92672>|</span>
 <span style=color:#75715e>---------------------------- ---------------------------- 
</span></code></pre></div><p>となり、あたり前だがドキュメントの記載通りの動きをしている。</p><h1 id=heading-1>他の日付関数はどうなのか</h1><blockquote><p>つまり、NOW() などの関数が単一クエリー内で複数回参照されても、常に同じ結果が生成されます。
&mldr;中略&mldr;
この原則は、CURDATE()、CURTIME()、UTC_DATE()、UTC_TIME()、UTC_TIMESTAMP()、およびそれらのシノニムにも適用されます。</p></blockquote><p>とのことでした。</p></div><div class=article-toc><h3>Contents</h3><nav id=TableOfContents><ul><li><a href=#now>NOW()</a></li><li><a href=#sysdate>SYSDATE()</a></li></ul></nav></div><footer class=article-footer><ul class=article-tag-list><li class=article-tag-list-item><a class=article-tag-list-link href=https://yuizho.github.io/blog//tags/mysql>MySQL</a></li><li class=article-tag-list-item><a class=article-tag-list-link href=https://yuizho.github.io/blog//tags/tech>tech</a></li></ul></footer></div><nav id=article-nav><a href=/blog/posts/20190701/ id=article-nav-newer class=article-nav-link-wrap><div class=article-nav-title><span>&lt;</span>&nbsp;
Spring JDBCのbatchUpdateはどのへんが効率的なのか</div></a><a href=/blog/posts/20190413/ id=article-nav-older class=article-nav-link-wrap><div class=article-nav-title>input type="date"で手っ取り早くそれなりの日付入力フォームを作る&nbsp;<span>></span></div></a></nav></article></section><footer id=footer><div class=outer><div id=footer-info class=inner>&copy; 2020 yuizho<br>Powered by <a href=https://gohugo.io target=_blank>Hugo</a> with theme <a href=https://github.com/carsonip/hugo-theme-minos target=_blank>Minos</a></div></div><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-155195987-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/tomorrow-night.min.css integrity="sha256-2wL88NKUqvJi/ExflDzkzUumjUM73mcK2gBvBBeLvTk=" crossorigin=anonymous><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js integrity="sha256-KbfTjB0WZ8vvXngdpJGY3Yp3xKk+tttbqClO11anCIU=" crossorigin=anonymous></script><script>hljs.initHighlightingOnLoad();</script><script>document.getElementById('main-nav-toggle').addEventListener('click',function(){var header=document.getElementById('header');if(header.classList.contains('mobile-on')){header.classList.remove('mobile-on');}else{header.classList.add('mobile-on');}});</script></footer></div></body></html>